{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kassymzhan.nuraliyev\\\\OneDrive - KAZ Minerals Management LLP\\\\Desktop\\\\Tablo\\\\Tablo\\\\frontend\\\\src\\\\App.js\";\n// frontend/src/App.js\nimport React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider } from './contexts/AuthContext';\n\n// Импортируем существующие компоненты с правильными именами файлов\nimport Dashboard from './components/Dashboard'; // Dashboard.js существует\nimport Archive from './components/archive'; // archive.js (с маленькой буквы!)\nimport Login from './components/LoginModal'; // LoginModal.js (не Login!)\n\n// Компоненты для обработки ошибок - нужно создать или использовать существующие\n// import ErrorNotification from './components/ErrorNotification'; // ErrorNotification.css существует\nimport StatusCards from './components/StatusCards'; // StatusCards.js существует (можно использовать вместо ConnectionStatus)\n\n// Если ProtectedRoute не существует, создадим простую версию ниже\nimport './App.css';\n\n// Простой компонент ProtectedRoute (создайте файл components/ProtectedRoute.js)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requiredRoles\n}) => {\n  // Временная заглушка - замените на полную версию с проверкой авторизации\n  const user = JSON.parse(localStorage.getItem('user') || '{}');\n  if (!user || !user.token) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 16\n    }, this);\n  }\n  if (requiredRoles && !requiredRoles.includes(user.role)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '100vh'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0414\\u043E\\u0441\\u0442\\u0443\\u043F \\u0437\\u0430\\u043F\\u0440\\u0435\\u0449\\u0435\\u043D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0434\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u0447\\u043D\\u043E \\u043F\\u0440\\u0430\\u0432 \\u0434\\u043B\\u044F \\u043F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0430 \\u044D\\u0442\\u043E\\u0439 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.history.back(),\n        children: \"\\u041D\\u0430\\u0437\\u0430\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 13\n    }, this);\n  }\n  return children;\n};\n\n// Временный компонент ErrorNotification (если ErrorNotification.js не существует)\n_c = ProtectedRoute;\nconst ErrorNotificationComponent = () => {\n  // Используем существующие стили из ErrorNotification.css\n  return null; // Временно пустой\n};\n\n// Временный компонент ConnectionStatus на основе StatusCards\n_c2 = ErrorNotificationComponent;\nconst ConnectionStatus = () => {\n  return null; // Или можно использовать <StatusCards />\n};\n_c3 = ConnectionStatus;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: [/*#__PURE__*/_jsxDEV(ErrorNotificationComponent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ConnectionStatus, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 55\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/dashboard\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              requiredRoles: ['admin', 'dispatcher'],\n              children: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/archive\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              requiredRoles: ['admin', 'dispatcher', 'viewer'],\n              children: /*#__PURE__*/_jsxDEV(Archive, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              children: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(Navigate, {\n              to: \"/\",\n              replace: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_c4 = App;\nexport default App;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"ErrorNotificationComponent\");\n$RefreshReg$(_c3, \"ConnectionStatus\");\n$RefreshReg$(_c4, \"App\");","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","Dashboard","Archive","Login","StatusCards","jsxDEV","_jsxDEV","ProtectedRoute","children","requiredRoles","user","JSON","parse","localStorage","getItem","token","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","includes","role","style","display","flexDirection","alignItems","justifyContent","minHeight","onClick","window","history","back","_c","ErrorNotificationComponent","_c2","ConnectionStatus","_c3","App","className","path","element","_c4","$RefreshReg$"],"sources":["C:/Users/kassymzhan.nuraliyev/OneDrive - KAZ Minerals Management LLP/Desktop/Tablo/Tablo/frontend/src/App.js"],"sourcesContent":["// frontend/src/App.js\r\nimport React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport { AuthProvider } from './contexts/AuthContext';\r\n\r\n// Импортируем существующие компоненты с правильными именами файлов\r\nimport Dashboard from './components/Dashboard'; // Dashboard.js существует\r\nimport Archive from './components/archive';     // archive.js (с маленькой буквы!)\r\nimport Login from './components/LoginModal';    // LoginModal.js (не Login!)\r\n\r\n// Компоненты для обработки ошибок - нужно создать или использовать существующие\r\n// import ErrorNotification from './components/ErrorNotification'; // ErrorNotification.css существует\r\nimport StatusCards from './components/StatusCards'; // StatusCards.js существует (можно использовать вместо ConnectionStatus)\r\n\r\n// Если ProtectedRoute не существует, создадим простую версию ниже\r\nimport './App.css';\r\n\r\n// Простой компонент ProtectedRoute (создайте файл components/ProtectedRoute.js)\r\nconst ProtectedRoute = ({ children, requiredRoles }) => {\r\n    // Временная заглушка - замените на полную версию с проверкой авторизации\r\n    const user = JSON.parse(localStorage.getItem('user') || '{}');\r\n\r\n    if (!user || !user.token) {\r\n        return <Navigate to=\"/login\" replace />;\r\n    }\r\n\r\n    if (requiredRoles && !requiredRoles.includes(user.role)) {\r\n        return (\r\n            <div style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                minHeight: '100vh'\r\n            }}>\r\n                <h2>Доступ запрещен</h2>\r\n                <p>У вас недостаточно прав для просмотра этой страницы</p>\r\n                <button onClick={() => window.history.back()}>Назад</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\n// Временный компонент ErrorNotification (если ErrorNotification.js не существует)\r\nconst ErrorNotificationComponent = () => {\r\n    // Используем существующие стили из ErrorNotification.css\r\n    return null; // Временно пустой\r\n};\r\n\r\n// Временный компонент ConnectionStatus на основе StatusCards\r\nconst ConnectionStatus = () => {\r\n    return null; // Или можно использовать <StatusCards />\r\n};\r\n\r\nfunction App() {\r\n    return (\r\n        <AuthProvider>\r\n            <Router>\r\n                <div className=\"App\">\r\n                    {/* Глобальные компоненты */}\r\n                    <ErrorNotificationComponent />\r\n                    <ConnectionStatus />\r\n\r\n                    <Routes>\r\n                        {/* Страница входа - используем LoginModal */}\r\n                        <Route path=\"/login\" element={<Login />} />\r\n\r\n                        {/* Dashboard - только для admin и dispatcher */}\r\n                        <Route path=\"/dashboard\" element={\r\n                            <ProtectedRoute requiredRoles={['admin', 'dispatcher']}>\r\n                                <Dashboard />\r\n                            </ProtectedRoute>\r\n                        } />\r\n\r\n                        {/* Archive - для admin, dispatcher и viewer */}\r\n                        <Route path=\"/archive\" element={\r\n                            <ProtectedRoute requiredRoles={['admin', 'dispatcher', 'viewer']}>\r\n                                <Archive />\r\n                            </ProtectedRoute>\r\n                        } />\r\n\r\n                        {/* Главная страница - редирект на dashboard */}\r\n                        <Route path=\"/\" element={\r\n                            <ProtectedRoute>\r\n                                <Dashboard />\r\n                            </ProtectedRoute>\r\n                        } />\r\n\r\n                        {/* Обработка несуществующих роутов */}\r\n                        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\r\n                    </Routes>\r\n                </div>\r\n            </Router>\r\n        </AuthProvider>\r\n    );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}