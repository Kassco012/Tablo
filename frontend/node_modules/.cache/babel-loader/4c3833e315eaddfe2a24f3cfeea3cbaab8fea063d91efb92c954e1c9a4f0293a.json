{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kassymzhan.nuraliyev\\\\OneDrive - KAZ Minerals Management LLP\\\\Desktop\\\\Tablo_15_10\\\\Tablo\\\\frontend\\\\src\\\\contexts\\\\EquipmentContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EquipmentContext = /*#__PURE__*/createContext();\nexport const useEquipment = () => {\n  _s();\n  const context = useContext(EquipmentContext);\n  if (!context) {\n    throw new Error('useEquipment –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ EquipmentProvider');\n  }\n  return context;\n};\n_s(useEquipment, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const EquipmentProvider = ({\n  children\n}) => {\n  _s2();\n  const [equipment, setEquipment] = useState([]);\n  const [stats, setStats] = useState({\n    down: 0,\n    ready: 0,\n    // ‚ùå –£–±–∏—Ä–∞–µ–º (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º)\n    ready_today: 0,\n    // ‚úÖ –ù–û–í–´–ô: –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è\n    delay: 0,\n    standby: 0,\n    total: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è\n  const fetchEquipment = useCallback(async () => {\n    try {\n      console.log('üì• –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...');\n      setError(null);\n      const response = await api.get('/equipment');\n      let equipmentData = response.data;\n      if (equipmentData === null || equipmentData === undefined) {\n        console.error('response.data –ø—É—Å—Ç–æ–π!');\n        setEquipment([]);\n        return;\n      }\n\n      // –ï—Å–ª–∏ —ç—Ç–æ –º–∞—Å—Å–∏–≤\n      if (Array.isArray(equipmentData)) {\n        console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${equipmentData.length} –µ–¥–∏–Ω–∏—Ü`);\n        setEquipment(equipmentData);\n        return;\n      }\n\n      // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º –º–∞—Å—Å–∏–≤–æ–º\n      if (typeof equipmentData === 'object') {\n        const possibleKeys = ['equipment', 'data', 'items', 'records', 'results'];\n        for (const key of possibleKeys) {\n          if (equipmentData[key] && Array.isArray(equipmentData[key])) {\n            console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–∞—Å—Å–∏–≤ –≤ \"${key}\": ${equipmentData[key].length} –∑–∞–ø–∏—Å–µ–π`);\n            setEquipment(equipmentData[key]);\n            return;\n          }\n        }\n        console.error('‚ùå –ú–∞—Å—Å–∏–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω');\n      }\n      setEquipment([]);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:', error);\n      setError(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || error.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è');\n      setEquipment([]);\n    }\n  }, []);\n\n  // ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ Dashboard (DOWN + READY TODAY)\n  const fetchDashboardStats = useCallback(async () => {\n    try {\n      console.log('üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ dashboard...');\n      const response = await api.get('/stats/dashboard');\n      if (response.data.success) {\n        const {\n          down,\n          ready_today,\n          total\n        } = response.data.stats;\n        setStats(prev => ({\n          ...prev,\n          down: down || 0,\n          ready_today: ready_today || 0,\n          total: total || 0\n        }));\n        console.log(`‚úÖ Stats: DOWN=${down}, READY TODAY=${ready_today}`);\n      }\n    } catch (error) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ stats:', error);\n\n      // –§–æ–ª–ª–±—ç–∫: —Å—á–∏—Ç–∞–µ–º DOWN –ª–æ–∫–∞–ª—å–Ω–æ\n      if (Array.isArray(equipment) && equipment.length > 0) {\n        const downCount = equipment.filter(item => {\n          var _item$status;\n          return ((_item$status = item.status) === null || _item$status === void 0 ? void 0 : _item$status.toLowerCase()) === 'down';\n        }).length;\n        setStats(prev => ({\n          ...prev,\n          down: downCount,\n          total: equipment.length\n        }));\n        console.log(`‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç DOWN: ${downCount}`);\n      }\n    }\n  }, [equipment]);\n\n  // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–º–µ–Ω—É –¥–Ω—è (–æ–±–Ω—É–ª–µ–Ω–∏–µ READY –≤ 00:00)\n  useEffect(() => {\n    const checkMidnight = () => {\n      const now = new Date();\n      const seconds = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\n\n      // –ï—Å–ª–∏ —Å–µ–π—á–∞—Å 00:00:xx (–ø–µ—Ä–≤–∞—è –º–∏–Ω—É—Ç–∞ –Ω–æ–≤–æ–≥–æ –¥–Ω—è)\n      if (seconds < 60) {\n        console.log('üïê –ù–æ–≤—ã–π –¥–µ–Ω—å! –û–±–Ω—É–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ READY');\n        setStats(prev => ({\n          ...prev,\n          ready_today: 0\n        }));\n        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ\n        refreshData();\n      }\n    };\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É\n    const interval = setInterval(checkMidnight, 60000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\n  const refreshData = useCallback(async () => {\n    console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö...');\n    setLoading(true);\n    try {\n      await fetchEquipment();\n      // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ useEffect\n    } finally {\n      setLoading(false);\n    }\n  }, [fetchEquipment]);\n\n  // ‚úÖ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞\n  useEffect(() => {\n    console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è EquipmentProvider');\n    refreshData();\n  }, []);\n\n  // ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ equipment\n  useEffect(() => {\n    if (Array.isArray(equipment) && equipment.length >= 0) {\n      fetchDashboardStats();\n    }\n  }, [equipment, fetchDashboardStats]);\n\n  // ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥\n  useEffect(() => {\n    const interval = setInterval(() => {\n      console.log('‚è∞ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞');\n      refreshData();\n    }, 30000); // 30 —Å–µ–∫—É–Ω–¥\n\n    return () => clearInterval(interval);\n  }, [refreshData]);\n\n  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π\n  const updateEquipment = async (id, updateData) => {\n    try {\n      const response = await api.put(`/equipment/${id}`, updateData);\n      setEquipment(prev => {\n        if (!Array.isArray(prev)) return [];\n        return prev.map(item => item.id === id ? {\n          ...item,\n          ...response.data.equipment\n        } : item);\n      });\n      return response.data;\n    } catch (error) {\n      var _error$response2;\n      throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || {\n        message: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è'\n      };\n    }\n  };\n  const createEquipment = async equipmentData => {\n    try {\n      const response = await api.post('/equipment', equipmentData);\n      await refreshData();\n      return response.data;\n    } catch (error) {\n      var _error$response3;\n      throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || {\n        message: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è'\n      };\n    }\n  };\n  const deleteEquipment = async id => {\n    try {\n      await api.delete(`/equipment/${id}`);\n      setEquipment(prev => {\n        if (!Array.isArray(prev)) return [];\n        return prev.filter(item => item.id !== id);\n      });\n      return {\n        message: '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ'\n      };\n    } catch (error) {\n      var _error$response4;\n      throw ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || {\n        message: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è'\n      };\n    }\n  };\n  const getEquipmentById = id => {\n    return Array.isArray(equipment) ? equipment.find(item => item.id === id) : null;\n  };\n  const getEquipmentByStatus = status => {\n    return Array.isArray(equipment) ? equipment.filter(item => item.status === status) : [];\n  };\n  const getEquipmentByType = type => {\n    return Array.isArray(equipment) ? equipment.filter(item => item.type === type) : [];\n  };\n  const getEquipmentByPriority = priority => {\n    return Array.isArray(equipment) ? equipment.filter(item => item.priority === priority) : [];\n  };\n  const getCriticalEquipment = () => {\n    if (!Array.isArray(equipment)) return [];\n    return equipment.filter(item => item.priority === 'critical' || item.status === 'waiting' && item.delay_hours > 4);\n  };\n  const value = {\n    equipment: Array.isArray(equipment) ? equipment : [],\n    stats,\n    loading,\n    error,\n    refreshData,\n    updateEquipment,\n    createEquipment,\n    deleteEquipment,\n    getEquipmentById,\n    getEquipmentByStatus,\n    getEquipmentByType,\n    getEquipmentByPriority,\n    getCriticalEquipment\n  };\n  return /*#__PURE__*/_jsxDEV(EquipmentContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 251,\n    columnNumber: 9\n  }, this);\n};\n_s2(EquipmentProvider, \"4V2TC8VSycdk4x3biZLVskmjBmI=\");\n_c = EquipmentProvider;\nvar _c;\n$RefreshReg$(_c, \"EquipmentProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useCallback","api","jsxDEV","_jsxDEV","EquipmentContext","useEquipment","_s","context","Error","EquipmentProvider","children","_s2","equipment","setEquipment","stats","setStats","down","ready","ready_today","delay","standby","total","loading","setLoading","error","setError","fetchEquipment","console","log","response","get","equipmentData","data","undefined","Array","isArray","length","possibleKeys","key","_error$response","_error$response$data","message","fetchDashboardStats","success","prev","downCount","filter","item","_item$status","status","toLowerCase","checkMidnight","now","Date","seconds","getHours","getMinutes","getSeconds","refreshData","interval","setInterval","clearInterval","updateEquipment","id","updateData","put","map","_error$response2","createEquipment","post","_error$response3","deleteEquipment","delete","_error$response4","getEquipmentById","find","getEquipmentByStatus","getEquipmentByType","type","getEquipmentByPriority","priority","getCriticalEquipment","delay_hours","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kassymzhan.nuraliyev/OneDrive - KAZ Minerals Management LLP/Desktop/Tablo_15_10/Tablo/frontend/src/contexts/EquipmentContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';\r\nimport api from '../services/api';\r\n\r\nconst EquipmentContext = createContext();\r\n\r\nexport const useEquipment = () => {\r\n    const context = useContext(EquipmentContext);\r\n    if (!context) {\r\n        throw new Error('useEquipment –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–Ω—É—Ç—Ä–∏ EquipmentProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\nexport const EquipmentProvider = ({ children }) => {\r\n    const [equipment, setEquipment] = useState([]);\r\n    const [stats, setStats] = useState({\r\n        down: 0,\r\n        ready: 0,          // ‚ùå –£–±–∏—Ä–∞–µ–º (–±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º)\r\n        ready_today: 0,    // ‚úÖ –ù–û–í–´–ô: –æ—Ç—Ä–µ–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è\r\n        delay: 0,\r\n        standby: 0,\r\n        total: 0\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è\r\n    const fetchEquipment = useCallback(async () => {\r\n        try {\r\n            console.log('üì• –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è...');\r\n            setError(null);\r\n\r\n            const response = await api.get('/equipment');\r\n            let equipmentData = response.data;\r\n\r\n            if (equipmentData === null || equipmentData === undefined) {\r\n                console.error('response.data –ø—É—Å—Ç–æ–π!');\r\n                setEquipment([]);\r\n                return;\r\n            }\r\n\r\n            // –ï—Å–ª–∏ —ç—Ç–æ –º–∞—Å—Å–∏–≤\r\n            if (Array.isArray(equipmentData)) {\r\n                console.log(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: ${equipmentData.length} –µ–¥–∏–Ω–∏—Ü`);\r\n                setEquipment(equipmentData);\r\n                return;\r\n            }\r\n\r\n            // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º –º–∞—Å—Å–∏–≤–æ–º\r\n            if (typeof equipmentData === 'object') {\r\n                const possibleKeys = ['equipment', 'data', 'items', 'records', 'results'];\r\n\r\n                for (const key of possibleKeys) {\r\n                    if (equipmentData[key] && Array.isArray(equipmentData[key])) {\r\n                        console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –º–∞—Å—Å–∏–≤ –≤ \"${key}\": ${equipmentData[key].length} –∑–∞–ø–∏—Å–µ–π`);\r\n                        setEquipment(equipmentData[key]);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                console.error('‚ùå –ú–∞—Å—Å–∏–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω');\r\n            }\r\n\r\n            setEquipment([]);\r\n\r\n        } catch (error) {\r\n            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è:', error);\r\n            setError(error.response?.data?.message || error.message || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è');\r\n            setEquipment([]);\r\n        }\r\n    }, []);\r\n\r\n    // ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ Dashboard (DOWN + READY TODAY)\r\n    const fetchDashboardStats = useCallback(async () => {\r\n        try {\r\n            console.log('üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ dashboard...');\r\n            const response = await api.get('/stats/dashboard');\r\n\r\n            if (response.data.success) {\r\n                const { down, ready_today, total } = response.data.stats;\r\n\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    down: down || 0,\r\n                    ready_today: ready_today || 0,\r\n                    total: total || 0\r\n                }));\r\n\r\n                console.log(`‚úÖ Stats: DOWN=${down}, READY TODAY=${ready_today}`);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ stats:', error);\r\n\r\n            // –§–æ–ª–ª–±—ç–∫: —Å—á–∏—Ç–∞–µ–º DOWN –ª–æ–∫–∞–ª—å–Ω–æ\r\n            if (Array.isArray(equipment) && equipment.length > 0) {\r\n                const downCount = equipment.filter(\r\n                    item => item.status?.toLowerCase() === 'down'\r\n                ).length;\r\n\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    down: downCount,\r\n                    total: equipment.length\r\n                }));\r\n\r\n                console.log(`‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç DOWN: ${downCount}`);\r\n            }\r\n        }\r\n    }, [equipment]);\r\n\r\n    // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–º–µ–Ω—É –¥–Ω—è (–æ–±–Ω—É–ª–µ–Ω–∏–µ READY –≤ 00:00)\r\n    useEffect(() => {\r\n        const checkMidnight = () => {\r\n            const now = new Date();\r\n            const seconds = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r\n\r\n            // –ï—Å–ª–∏ —Å–µ–π—á–∞—Å 00:00:xx (–ø–µ—Ä–≤–∞—è –º–∏–Ω—É—Ç–∞ –Ω–æ–≤–æ–≥–æ –¥–Ω—è)\r\n            if (seconds < 60) {\r\n                console.log('üïê –ù–æ–≤—ã–π –¥–µ–Ω—å! –û–±–Ω—É–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ READY');\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    ready_today: 0\r\n                }));\r\n                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ\r\n                refreshData();\r\n            }\r\n        };\r\n\r\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É\r\n        const interval = setInterval(checkMidnight, 60000);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    // ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è\r\n    const refreshData = useCallback(async () => {\r\n        console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö...');\r\n        setLoading(true);\r\n        try {\r\n            await fetchEquipment();\r\n            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ useEffect\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [fetchEquipment]);\r\n\r\n    // ‚úÖ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞\r\n    useEffect(() => {\r\n        console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è EquipmentProvider');\r\n        refreshData();\r\n    }, []);\r\n\r\n    // ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ equipment\r\n    useEffect(() => {\r\n        if (Array.isArray(equipment) && equipment.length >= 0) {\r\n            fetchDashboardStats();\r\n        }\r\n    }, [equipment, fetchDashboardStats]);\r\n\r\n    // ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            console.log('‚è∞ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞');\r\n            refreshData();\r\n        }, 30000); // 30 —Å–µ–∫—É–Ω–¥\r\n\r\n        return () => clearInterval(interval);\r\n    }, [refreshData]);\r\n\r\n    // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π\r\n    const updateEquipment = async (id, updateData) => {\r\n        try {\r\n            const response = await api.put(`/equipment/${id}`, updateData);\r\n            setEquipment(prev => {\r\n                if (!Array.isArray(prev)) return [];\r\n                return prev.map(item =>\r\n                    item.id === id ? { ...item, ...response.data.equipment } : item\r\n                );\r\n            });\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || { message: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è' };\r\n        }\r\n    };\r\n\r\n    const createEquipment = async (equipmentData) => {\r\n        try {\r\n            const response = await api.post('/equipment', equipmentData);\r\n            await refreshData();\r\n            return response.data;\r\n        } catch (error) {\r\n            throw error.response?.data || { message: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è' };\r\n        }\r\n    };\r\n\r\n    const deleteEquipment = async (id) => {\r\n        try {\r\n            await api.delete(`/equipment/${id}`);\r\n            setEquipment(prev => {\r\n                if (!Array.isArray(prev)) return [];\r\n                return prev.filter(item => item.id !== id);\r\n            });\r\n            return { message: '–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ' };\r\n        } catch (error) {\r\n            throw error.response?.data || { message: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è' };\r\n        }\r\n    };\r\n\r\n    const getEquipmentById = (id) => {\r\n        return Array.isArray(equipment) ? equipment.find(item => item.id === id) : null;\r\n    };\r\n\r\n    const getEquipmentByStatus = (status) => {\r\n        return Array.isArray(equipment) ? equipment.filter(item => item.status === status) : [];\r\n    };\r\n\r\n    const getEquipmentByType = (type) => {\r\n        return Array.isArray(equipment) ? equipment.filter(item => item.type === type) : [];\r\n    };\r\n\r\n    const getEquipmentByPriority = (priority) => {\r\n        return Array.isArray(equipment) ? equipment.filter(item => item.priority === priority) : [];\r\n    };\r\n\r\n    const getCriticalEquipment = () => {\r\n        if (!Array.isArray(equipment)) return [];\r\n        return equipment.filter(item =>\r\n            item.priority === 'critical' ||\r\n            (item.status === 'waiting' && item.delay_hours > 4)\r\n        );\r\n    };\r\n\r\n    const value = {\r\n        equipment: Array.isArray(equipment) ? equipment : [],\r\n        stats,\r\n        loading,\r\n        error,\r\n        refreshData,\r\n        updateEquipment,\r\n        createEquipment,\r\n        deleteEquipment,\r\n        getEquipmentById,\r\n        getEquipmentByStatus,\r\n        getEquipmentByType,\r\n        getEquipmentByPriority,\r\n        getCriticalEquipment\r\n    };\r\n\r\n    return (\r\n        <EquipmentContext.Provider value={value}>\r\n            {children}\r\n        </EquipmentContext.Provider>\r\n    );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}