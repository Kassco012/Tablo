{"ast":null,"code":"import axios from 'axios';\n\n// –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// –ò–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ - –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('authToken');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏\n  if (process.env.NODE_ENV === 'development') {\n    var _config$method;\n    console.log(`üöÄ API Request: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n  }\n  return config;\n}, error => {\n  console.error('‚ùå Request Error:', error);\n  return Promise.reject(error);\n});\n\n// –ò–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤ - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫\napi.interceptors.response.use(response => {\n  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏\n  if (process.env.NODE_ENV === 'development') {\n    var _response$config$meth;\n    console.log(`‚úÖ API Response: ${(_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase()} ${response.config.url}`, response.data);\n  }\n  return response;\n}, error => {\n  console.error('‚ùå Response Error:', error);\n\n  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫\n  if (error.response) {\n    // –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏\n    const {\n      status,\n      data\n    } = error.response;\n    switch (status) {\n      case 401:\n        // –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø - —É–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º\n        localStorage.removeItem('authToken');\n        if (window.location.pathname !== '/') {\n          window.location.href = '/';\n        }\n        break;\n      case 403:\n        console.warn('üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω');\n        break;\n      case 404:\n        console.warn('üîç –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');\n        break;\n      case 422:\n        console.warn('üìù –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö');\n        break;\n      case 500:\n        console.error('üî• –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');\n        break;\n      default:\n        console.error(`üêõ HTTP Error ${status}:`, (data === null || data === void 0 ? void 0 : data.message) || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');\n    }\n\n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é –æ—à–∏–±–∫—É\n    return Promise.reject({\n      status,\n      message: (data === null || data === void 0 ? void 0 : data.message) || `–û—à–∏–±–∫–∞ HTTP ${status}`,\n      data\n    });\n  } else if (error.request) {\n    // –ó–∞–ø—Ä–æ—Å –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –Ω–æ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω\n    console.error('üåê –°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç');\n    return Promise.reject({\n      message: '–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.'\n    });\n  } else {\n    // –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∑–∞–ø—Ä–æ—Å–∞\n    console.error('‚öôÔ∏è –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞:', error.message);\n    return Promise.reject({\n      message: error.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞'\n    });\n  }\n});\n\n// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤\nexport const apiHelpers = {\n  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API\n  healthCheck: () => api.get('/health'),\n  // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è\n  auth: {\n    login: credentials => api.post('/auth/login', credentials),\n    register: userData => api.post('/auth/register', userData),\n    verify: () => api.get('/auth/verify'),\n    logout: () => api.post('/auth/logout'),\n    getUsers: () => api.get('/auth/users')\n  },\n  // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ\n  equipment: {\n    getAll: () => api.get('/equipment'),\n    getById: id => api.get(`/equipment/${id}`),\n    getStats: () => api.get('/equipment/stats'),\n    create: data => api.post('/equipment', data),\n    update: (id, data) => api.put(`/equipment/${id}`, data),\n    delete: id => api.delete(`/equipment/${id}`),\n    getHistory: id => api.get(`/equipment/${id}/history`)\n  }\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞\nexport const createCancelToken = () => axios.CancelToken.source();\n\n// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞\nexport const isCancel = error => axios.isCancel(error);\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤\nexport const uploadFile = (file, onProgress) => {\n  const formData = new FormData();\n  formData.append('file', file);\n  return api.post('/upload', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    },\n    onUploadProgress: progressEvent => {\n      if (onProgress && progressEvent.total) {\n        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        onProgress(percentCompleted);\n      }\n    }\n  });\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤\nexport const downloadFile = (url, filename) => {\n  return api.get(url, {\n    responseType: 'blob'\n  }).then(response => {\n    const blob = new Blob([response.data]);\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    link.click();\n    window.URL.revokeObjectURL(link.href);\n  });\n};\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞\nexport const retryRequest = async (requestFn, maxRetries = 3, delay = 1000) => {\n  let lastError;\n  for (let i = 0; i < maxRetries; i++) {\n    try {\n      return await requestFn();\n    } catch (error) {\n      lastError = error;\n\n      // –ù–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (4xx)\n      if (error.status >= 400 && error.status < 500) {\n        throw error;\n      }\n\n      // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π\n      if (i < maxRetries - 1) {\n        await new Promise(resolve => setTimeout(resolve, delay * (i + 1)));\n      }\n    }\n  }\n  throw lastError;\n};\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","NODE_ENV","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","_response$config$meth","data","status","removeItem","window","location","pathname","href","warn","message","apiHelpers","healthCheck","get","auth","login","credentials","post","register","userData","verify","logout","getUsers","equipment","getAll","getById","id","getStats","update","put","delete","getHistory","createCancelToken","CancelToken","source","isCancel","uploadFile","file","onProgress","formData","FormData","append","onUploadProgress","progressEvent","total","percentCompleted","Math","round","loaded","downloadFile","filename","responseType","then","blob","Blob","link","document","createElement","URL","createObjectURL","download","click","revokeObjectURL","retryRequest","requestFn","maxRetries","delay","lastError","i","resolve","setTimeout"],"sources":["C:/Users/kassymzhan.nuraliyev/OneDrive - KAZ Minerals Management LLP/Desktop/MMA/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API\r\nconst api = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\r\n    timeout: 10000,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\n// –ò–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ - –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        const token = localStorage.getItem('authToken');\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n\r\n        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏\r\n        if (process.env.NODE_ENV === 'development') {\r\n            console.log(`üöÄ API Request: ${config.method?.toUpperCase()} ${config.url}`);\r\n        }\r\n\r\n        return config;\r\n    },\r\n    (error) => {\r\n        console.error('‚ùå Request Error:', error);\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// –ò–Ω—Ç–µ—Ä—Å–µ–ø—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤ - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫\r\napi.interceptors.response.use(\r\n    (response) => {\r\n        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏\r\n        if (process.env.NODE_ENV === 'development') {\r\n            console.log(`‚úÖ API Response: ${response.config.method?.toUpperCase()} ${response.config.url}`, response.data);\r\n        }\r\n\r\n        return response;\r\n    },\r\n    (error) => {\r\n        console.error('‚ùå Response Error:', error);\r\n\r\n        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫\r\n        if (error.response) {\r\n            // –°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª —Å –∫–æ–¥–æ–º –æ—à–∏–±–∫–∏\r\n            const { status, data } = error.response;\r\n\r\n            switch (status) {\r\n                case 401:\r\n                    // –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø - —É–¥–∞–ª—è–µ–º —Ç–æ–∫–µ–Ω –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º\r\n                    localStorage.removeItem('authToken');\r\n                    if (window.location.pathname !== '/') {\r\n                        window.location.href = '/';\r\n                    }\r\n                    break;\r\n\r\n                case 403:\r\n                    console.warn('üö´ –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω');\r\n                    break;\r\n\r\n                case 404:\r\n                    console.warn('üîç –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω');\r\n                    break;\r\n\r\n                case 422:\r\n                    console.warn('üìù –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö');\r\n                    break;\r\n\r\n                case 500:\r\n                    console.error('üî• –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');\r\n                    break;\r\n\r\n                default:\r\n                    console.error(`üêõ HTTP Error ${status}:`, data?.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞');\r\n            }\r\n\r\n            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é –æ—à–∏–±–∫—É\r\n            return Promise.reject({\r\n                status,\r\n                message: data?.message || `–û—à–∏–±–∫–∞ HTTP ${status}`,\r\n                data\r\n            });\r\n        } else if (error.request) {\r\n            // –ó–∞–ø—Ä–æ—Å –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –Ω–æ –æ—Ç–≤–µ—Ç –Ω–µ –ø–æ–ª—É—á–µ–Ω\r\n            console.error('üåê –°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç');\r\n            return Promise.reject({\r\n                message: '–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.'\r\n            });\r\n        } else {\r\n            // –ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∑–∞–ø—Ä–æ—Å–∞\r\n            console.error('‚öôÔ∏è –û—à–∏–±–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–∞:', error.message);\r\n            return Promise.reject({\r\n                message: error.message || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞'\r\n            });\r\n        }\r\n    }\r\n);\r\n\r\n// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤\r\nexport const apiHelpers = {\r\n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API\r\n    healthCheck: () => api.get('/health'),\r\n\r\n    // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è\r\n    auth: {\r\n        login: (credentials) => api.post('/auth/login', credentials),\r\n        register: (userData) => api.post('/auth/register', userData),\r\n        verify: () => api.get('/auth/verify'),\r\n        logout: () => api.post('/auth/logout'),\r\n        getUsers: () => api.get('/auth/users'),\r\n    },\r\n\r\n    // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ\r\n    equipment: {\r\n        getAll: () => api.get('/equipment'),\r\n        getById: (id) => api.get(`/equipment/${id}`),\r\n        getStats: () => api.get('/equipment/stats'),\r\n        create: (data) => api.post('/equipment', data),\r\n        update: (id, data) => api.put(`/equipment/${id}`, data),\r\n        delete: (id) => api.delete(`/equipment/${id}`),\r\n        getHistory: (id) => api.get(`/equipment/${id}/history`),\r\n    },\r\n};\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞\r\nexport const createCancelToken = () => axios.CancelToken.source();\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞\r\nexport const isCancel = (error) => axios.isCancel(error);\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤\r\nexport const uploadFile = (file, onProgress) => {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    return api.post('/upload', formData, {\r\n        headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n        },\r\n        onUploadProgress: (progressEvent) => {\r\n            if (onProgress && progressEvent.total) {\r\n                const percentCompleted = Math.round(\r\n                    (progressEvent.loaded * 100) / progressEvent.total\r\n                );\r\n                onProgress(percentCompleted);\r\n            }\r\n        },\r\n    });\r\n};\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤\r\nexport const downloadFile = (url, filename) => {\r\n    return api.get(url, {\r\n        responseType: 'blob',\r\n    }).then((response) => {\r\n        const blob = new Blob([response.data]);\r\n        const link = document.createElement('a');\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = filename;\r\n        link.click();\r\n        window.URL.revokeObjectURL(link.href);\r\n    });\r\n};\r\n\r\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –∑–∞–ø—Ä–æ—Å–∞\r\nexport const retryRequest = async (requestFn, maxRetries = 3, delay = 1000) => {\r\n    let lastError;\r\n\r\n    for (let i = 0; i < maxRetries; i++) {\r\n        try {\r\n            return await requestFn();\r\n        } catch (error) {\r\n            lastError = error;\r\n\r\n            // –ù–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (4xx)\r\n            if (error.status >= 400 && error.status < 500) {\r\n                throw error;\r\n            }\r\n\r\n            // –ñ–¥–µ–º –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–ø—ã—Ç–∫–æ–π\r\n            if (i < maxRetries - 1) {\r\n                await new Promise(resolve => setTimeout(resolve, delay * (i + 1)));\r\n            }\r\n        }\r\n    }\r\n\r\n    throw lastError;\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}